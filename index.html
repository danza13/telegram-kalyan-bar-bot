<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8"/>
  <title>Форма бронювання</title>
</head>
<body>
<h1>Форма бронювання</h1>

<label for="place">Заклад:</label><br/>
<select id="place">
  <option value="вул. Антоновича, 157">вул. Антоновича, 157</option>
  <option value="пр-т. Тичини, 8">пр-т. Тичини, 8</option>
</select>
<br/><br/>

<label for="datetime">Час та дата:</label><br/>
<input type="datetime-local" id="datetime" />
<br/><br/>

<label for="name">Ім'я:</label><br/>
<input type="text" id="name" placeholder="Введіть ім'я"/>
<br/><br/>

<label for="guests">Кількість гостей:</label><br/>
<input type="number" id="guests" placeholder="Тільки цифри" min="1" />
<br/><br/>

<button id="confirmBtn">Підтвердити</button>

<script>
  // Параметри з URL (для редагування)
  const urlParams = new URLSearchParams(window.location.search);
  const placeSelect = document.getElementById('place');
  const datetimeInput = document.getElementById('datetime');
  const nameInput = document.getElementById('name');
  const guestsInput = document.getElementById('guests');

  if (urlParams.has('place')) {
    placeSelect.value = urlParams.get('place');
  }
  if (urlParams.has('datetime')) {
    datetimeInput.value = urlParams.get('datetime');
  }
  if (urlParams.has('name')) {
    nameInput.value = urlParams.get('name');
  }
  if (urlParams.has('guests')) {
    guestsInput.value = urlParams.get('guests');
  }

  // Telegram WebApp
  const tg = window.Telegram.WebApp;
  tg.expand(); // Розгортаємо WebApp на повний екран

  document.getElementById('confirmBtn').addEventListener('click', () => {
    const place = placeSelect.value;
    const datetime = datetimeInput.value;
    const name = nameInput.value.trim();
    const guests = guestsInput.value.trim();

    if (!place || !datetime || !name || !guests) {
      alert("Будь ласка, заповніть усі поля!");
      return;
    }

    // Формуємо об'єкт і відправляємо через sendData()
    const formData = {
      place: place,
      datetime: datetime,
      name: name,
      guests: guests
    };

    tg.sendData(JSON.stringify(formData));

    // Можна закрити форму після відправки:
    // tg.close();
  });
</script>
</body>
</html>
